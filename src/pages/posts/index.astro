---
import Card from "@/components/Card.astro";
import Layout from "@/layouts/Layout.astro";
import { getCollection } from "astro:content";

const posts = await getCollection("blog", ({ data }) => data.published);
posts.sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
---

<Layout
  title="Posts - corscheid.dev"
  heading="Posts"
  description="Blog posts index - corscheid.dev - portfolio site of Corey Scheideman, web developer"
>
  <article class="min-h-dvh p-4">
    <div class="flex flex-col items-center gap-4 md:flex-row md:flex-wrap md:items-center md:justify-center">
      {
        posts.map((post, i) => (
          <Card
            imgSrc={post.data.image.src}
            imgAlt={post.data.image.alt}
            imgPriority={i < 10}
            title={post.data.title}
            url={`/posts/${post.data.slug}`}
            description={post.data.description}
          />
        ))
      }
    </div>
  </article>
</Layout>
